<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<title>Test</title></head>
<body>
  <video autoplay="autoplay"></video>
  <canvas></canvas>
<script type="application/javascript">
'use strict';

var video = document.querySelector('video');
var canvas = document.querySelector('canvas');

function s(stream) {
  video.src = window.URL.createObjectURL(stream);
  video.onloadedmetadata = function(e) {
    video.addEventListener("click", shot);
  };
}

function shot(){
  canvas.width=video.videoWidth;
  canvas.height=video.videoHeight;
  canvas.getContext("2d").drawImage(video,0,0);
}

function e(x) {
  console.log(x);
}
navigator.mediaDevices.getUserMedia({ audio: false, video: true}).then(s).catch(e);
</script>

</body></html>
